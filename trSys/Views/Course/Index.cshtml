@model IEnumerable<trSys.Models.Course>
@{
    ViewData["Title"] = "Все курсы";
}

<link rel="stylesheet" href="~/css/courses_style.css" />

<div class="main-wrapper">
    <aside class="sidebar">
        <h2 class="sidebar-title">Курсы</h2>

        @if (User.IsInRole("Admin"))
        {
            <a asp-action="Create" class="button button1">
                <i class="fas fa-plus"></i> Создать новый курс
            </a>
        }

        <nav class="course-list">
            @foreach (var course in Model)
            {
                <a asp-action="Details" asp-controller="Course" asp-route-id="@course.Id" class="course-list-item">
                    @course.Title
                </a>
            }
        </nav>
    </aside>

    <main class="content-area">
        <h2 class="mb-4">Доступные курсы</h2>

        <div class="courses-grid">
            @foreach (var course in Model)
            {
                <div class="course-card">
                    <a asp-action="Details" asp-controller="Course" asp-route-id="@course.Id" class="card-link text-decoration-none">
                        @if (course.CoverImageId != null)
                        {
                            <img src="@Url.Content($"/api/File/{course.CoverImageId}")"
                                 class="card-img-top"
                                 alt="Обложка курса" />
                        }
                        else
                        {
                            <div class="card-img-top bg-secondary d-flex align-items-center justify-content-center">
                                <i class="fas fa-book-open text-white" style="font-size: 2rem;"></i>
                            </div>
                        }
                        <div class="card-body">
                            <h5 class="card-title">@course.Title</h5>
                            <p class="card-text text-muted">
                                @(course.Description?.Length > 100 ? course.Description.Substring(0, 100) + "..." : course.Description)
                            </p>
                        </div>
                    </a>

                    @if (User.IsInRole("Admin"))
                    {
                        <div class="course-actions">
                            <a asp-action="Edit" asp-route-id="@course.Id" style="margin-top: 5px;" class="btn button1">
                                <i class="fas fa-edit"></i> Редактировать
                            </a>
                            <a asp-action="Delete" asp-route-id="@course.Id" style="margin-top: 5px;" class="btn button2">
                                <i class="fas fa-trash"></i> Удалить
                            </a>
                        </div>
                    }
                </div>
            }
        </div>
    </main>
</div>
