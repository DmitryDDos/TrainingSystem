@model trSys.Models.Profile

@{
    ViewData["Title"] = "Профиль";
}

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        body {
            background-color: #E8F1F6;
            margin: 0;
            font-family: Arial, sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
        }

        /* Стили для контейнера профиля */
        .profile-container {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 90%;
            max-width: 600px;
            margin-top: 30px;
        }

        .avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-bottom: 20px;
            border: 2px solid #00C0C9;
            object-fit: cover;
            display: none; /* Скрываем по умолчанию */
        }

        .avatar-placeholder {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-bottom: 20px;
            border: 2px solid #00C0C9;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #888;
            font-weight: bold;
            background-color: #f0f0f0; /* Цвет фона для пустого аватара */
        }

        .form-group {
            margin-bottom: 15px;
        }

            .form-group label {
                display: block;
                margin-bottom: 5px;
            }

            .form-group input {
                width: calc(100% - 20px);
                padding: 10px;
                border-radius: 6px;
                border: 1px solid #ccc;
            }
    </style>
</head>
<body>
    <div class="profile-container">
        <h2>Профиль пользователя</h2>
        <div class="form-group">
            <label for="avatar">Аватар:</label><br />
            <div class="avatar-placeholder" id="avatarPlaceholder">Нет фото</div>
            <img id="avatarPreview" class="avatar" alt="Аватар" />
            <input type="file" id="avatar" accept="image/*" style="display:none; margin-top:10px;" onchange="previewImage(event)">
        </div>
        <div class="form-group">
            <label for="fullName">ФИО:</label>
            <input type="text" id="fullName" value="@Model.FullName" readonly />
        </div>
        <div class="form-group">
            <label for="email">Почта:</label>
            <input type="email" id="email" value="@Model.Email" readonly />
        </div>
        <div class="form-group">
            <label for="phone">Телефон:</label>
            <input type="tel" id="phone" value="@Model.Phone" readonly />
        </div>
        <button class="button" id="editButton">Редактировать данные</button>
        <button class="button" id="saveButton" style="display:none;">Сохранить</button>
        <button class="button" onclick="location.href='/Home/Index'">Назад</button>
    </div>

    <script>
        const editButton = document.getElementById('editButton');
        const saveButton = document.getElementById('saveButton');
        const inputs = document.querySelectorAll('.form-group input:not(#avatar)');
        const avatarInput = document.getElementById('avatar');
        const avatarPreview = document.getElementById('avatarPreview');
        const avatarPlaceholder = document.getElementById('avatarPlaceholder');

        editButton.addEventListener('click', () => {
            inputs.forEach(input => input.removeAttribute('readonly'));
            avatarInput.style.display = 'block'; // показываем загрузку аватара
            editButton.style.display = 'none';
            saveButton.style.display = 'inline-block';
        });

        saveButton.addEventListener('click', () => {
            // Здесь можно добавить сохранение на сервер
            inputs.forEach(input => input.setAttribute('readonly', true));
            avatarInput.style.display = 'none'; // скрываем загрузку аватара
            editButton.style.display = 'inline-block';
            saveButton.style.display = 'none';
        });

        function previewImage(event) {
            const file = event.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = e => {
                avatarPreview.src = e.target.result;
                avatarPreview.style.display = 'block'; // Показываем аватар
                avatarPlaceholder.style.display = 'none'; // Скрываем текст "Нет фото"
            };
            reader.readAsDataURL(file);
        }
    </script>
</body>
</html>
